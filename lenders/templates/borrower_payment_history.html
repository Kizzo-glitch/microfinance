{% extends "base.html" %}

{% block content %}
<h2>Borrower Payment History</h2>

{% for loan in loans %}
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">Loan ID: {{ loan.id }}</h5>
            <p>Loan Amount: R{{ loan.amount }}</p>
            <p>Interest Rate: {{ loan.interest_rate }}%</p>
            <p>Monthly Payment: R{{ loan.monthly_payment }}</p>
            <p>Outstanding Balance: R{{ loan.outstanding_balance }}</p>
            <p>Months Left: {{ loan.remaining_months }}</p>

            <h6>Payment History:</h6>
            <table class="table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Amount Paid</th>
                    </tr>
                </thead>
                <tbody>
                    {% for payment in loan.payment_history %}
                        <tr>
                            <td>{{ payment.date_paid }}</td>
                            <td>R{{ payment.amount }}</td>
                        </tr>
                    {% empty %}
                        <tr><td colspan="2">No payments made yet.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endfor %}

{% endblock %}
